<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>PHOTONOIR - 2026 COLLECTION</title>
    <meta name="description" content="Một thước phim điện ảnh cho năm 2026 của bạn.">
    <meta property="og:image" content="logo.png"> 
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600;800&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --bg-color: #E0E0E0; 
            --ink-color: #050505; 
            --accent-gray: #888;
        }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        html, body {
            margin: 0; padding: 0;
            background-color: var(--bg-color); color: var(--ink-color);
            font-family: 'Manrope', sans-serif;
            overflow-x: hidden; 
            overflow-y: auto; 
            scroll-behavior: smooth;
        }

        /* ================= 1. CINEMATIC FILM EFFECTS ================= */
        .film-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            pointer-events: none; z-index: 100; overflow: hidden;
        }

        /* Nhiễu hạt (Grain) - Dùng SVG filter để nét hơn */
        .grain {
            position: absolute; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.12'/%3E%3C/svg%3E");
            opacity: 0.6;
            animation: grainFlicker 0.2s steps(2) infinite;
        }

        /* Vết xước dọc (Scratches) - Random hơn */
        .scratches {
            position: absolute; width: 200%; height: 200%; top: -50%; left: -50%;
            background: repeating-linear-gradient(90deg, transparent 0, transparent 2px, rgba(0,0,0,0.05) 3px, transparent 4px);
            animation: scratchJump 0.3s steps(1) infinite;
            opacity: 0.4;
        }

        /* Vệt bụi (Dust) */
        .dust {
            position: absolute; width: 100%; height: 100%;
            background-image: radial-gradient(rgba(50,50,50,0.1) 1px, transparent 1px);
            background-size: 150px 150px;
            animation: dustMove 1s steps(5) infinite;
            opacity: 0.5;
        }

        @keyframes grainFlicker { 0% { transform: translate(0,0); } 100% { transform: translate(2px, 2px); } }
        @keyframes scratchJump { 0% { transform: translateX(0); opacity: 0.2; } 50% { transform: translateX(10%); opacity: 0.4; } 100% { transform: translateX(-5%); opacity: 0.1; } }
        @keyframes dustMove { 0% { transform: translateY(0); } 100% { transform: translateY(100px); } }

        /* ================= 2. LOADING SCREEN ================= */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            transition: opacity 0.8s ease-out;
        }
        .loader-text {
            font-family: 'Manrope', sans-serif; font-weight: 800; letter-spacing: 2px;
            animation: pulse 1s infinite;
        }

        /* ================= 3. HERO SECTION (PLAYER) ================= */
        .screen-hero {
            width: 100%; min-height: 100vh;
            max-width: 480px; margin: 0 auto;
            display: flex; flex-direction: column; 
            justify-content: flex-start; align-items: center; 
            position: relative; z-index: 2;
            /* Padding tối ưu sát tai thỏ */
            padding: env(safe-area-inset-top) 20px 20px;
        }

        /* LOGO */
        .logo-wrapper {
            width: 100%; display: flex; justify-content: center;
            margin-top: 1vh; margin-bottom: 0; z-index: 10;
        }
        .logo-img { 
            width: 95%; max-width: 420px; height: auto; object-fit: contain; 
            filter: contrast(1.4) drop-shadow(0 10px 20px rgba(0,0,0,0.2)); 
        }

        /* MAIN CONTENT */
        .center-content {
            width: 100%; display: flex; flex-direction: column; align-items: center;
            margin-top: -65px; /* Kéo đè lên vùng dưới logo */
            position: relative; z-index: 5;
        }

        /* VINYL */
        .vinyl-container {
            width: 66vmin; height: 66vmin; max-width: 320px; max-height: 320px;
            position: relative; display: flex; justify-content: center; align-items: center;
            margin-bottom: 20px;
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .vinyl-container:active { transform: scale(0.95); }
        
        .vinyl-record {
            width: 100%; height: 100%; border-radius: 50%;
            background: #111;
            /* Tạo vân đĩa chân thực hơn */
            background-image: repeating-radial-gradient(#111 0, #111 2px, #1a1a1a 3px, #111 4px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .vinyl-record::after {
            content: ''; position: absolute; top:0; left:0; width:100%; height:100%; border-radius:50%;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(255,255,255,0.05) 100%);
            pointer-events: none;
        }
        
        .spinning-anim { animation: spin 8s linear infinite; } /* Quay 8s cho mượt */
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .vinyl-label {
            position: absolute; width: 35%; height: 35%; background: #f4f4f4; border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2); border: 1px solid #ccc;
        }
        .spindle { width: 6px; height: 6px; background: #000; border-radius: 50%; }

        /* TEXT */
        .message-area {
            width: 100%; height: 90px; text-align: center; padding: 0 5px;
            display: flex; flex-direction: column; gap: 4px; justify-content: flex-start;
        }
        .wishes-text {
            font-size: 16px; font-weight: 800; line-height: 1.3; color: #000;
            text-transform: uppercase; letter-spacing: -0.5px;
            display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;
        }
        .meta-text {
            font-size: 10px; font-weight: 700; color: #666; letter-spacing: 2px; text-transform: uppercase;
        }
        .breathing { animation: pulse 3s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .glitch { animation: glitch 0.3s both; }
        @keyframes glitch { 0% { transform: translate(0); } 20% { transform: translate(-2px, 2px); } 40% { transform: translate(-2px, -2px); } 60% { transform: translate(2px, 2px); } 80% { transform: translate(2px, -2px); } 100% { transform: translate(0); } }

        /* PLAYER BAR */
        .player-wrapper {
            width: 100%; margin-top: 15px; padding: 0 10px;
        }
        .progress-bar-bg { width: 100%; height: 4px; background: rgba(0,0,0,0.1); border-radius: 2px; }
        .progress-bar-fill { width: 0%; height: 100%; background: #000; transition: width 0.1s linear; }
        .time-display { display: flex; justify-content: space-between; font-size: 10px; font-weight: 700; margin-top: 8px; color: #444; font-family: monospace;}
        
        .scroll-hint {
            position: absolute; bottom: 20px; width: 100%; text-align: center;
            font-size: 10px; letter-spacing: 2px; text-transform: uppercase; opacity: 0.6;
            animation: float 2s infinite; cursor: pointer;
        }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(5px); } }

        /* ================= 4. LETTER SECTION (THƯ CẢM ƠN) ================= */
        .screen-letter {
            width: 100%; max-width: 480px; margin: 0 auto;
            position: relative; z-index: 2;
            padding: 80px 30px 120px;
            background: linear-gradient(180deg, rgba(224,224,224,0) 0%, rgba(245,245,245,0.95) 15%, #F5F5F5 100%);
        }

        .letter-container {
            border-left: 2px solid #000; /* Đường kẻ dọc tạo phong cách tạp chí */
            padding-left: 25px;
        }

        .letter-header {
            font-family: 'Manrope', sans-serif;
            font-weight: 800; font-size: 12px; letter-spacing: 3px;
            text-transform: uppercase; margin-bottom: 30px; opacity: 0.5;
        }

        .letter-body {
            font-family: 'Playfair Display', serif;
            font-size: 18px; line-height: 1.8; color: #111;
            font-weight: 400;
        }
        .letter-body p { margin-bottom: 25px; }
        
        /* Chữ cái đầu tiên to (Drop Cap) */
        .letter-body p:first-child::first-letter {
            font-size: 3.5em; float: left; line-height: 0.8; margin-right: 10px; font-weight: 600;
        }

        .letter-sign {
            margin-top: 50px; font-family: 'Manrope', sans-serif;
            font-weight: 700; font-size: 14px; text-transform: uppercase;
            letter-spacing: 1px; border-top: 1px solid #ccc; display: inline-block; padding-top: 10px;
        }

        /* --- VISITOR COUNTER (Ẩn đi cho đẹp, hoặc để nhỏ xíu dưới cùng) --- */
        #busuanzi_container_site_pv { display: none; }

        /* Responsive Fixes */
        @media (max-height: 700px) {
            .vinyl-container { width: 55vmin; height: 55vmin; margin-bottom: 15px; }
            .message-area { height: 80px; }
            .wishes-text { font-size: 14px; }
        }
    </style>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</head>
<body>

    <div id="loader"><div class="loader-text">LOADING 2026...</div></div>

    <div class="film-layer">
        <div class="grain"></div>
        <div class="scratches"></div>
        <div class="dust"></div>
    </div>

    <div class="screen-hero">
        <div class="logo-wrapper">
            <img src="logo.png" alt="PHOTONOIR" class="logo-img">
        </div>

        <div class="center-content">
            <div class="vinyl-container" onclick="handleInteraction()">
                <div class="vinyl-record" id="record"></div>
                <div class="vinyl-label" id="label"><div class="spindle"></div></div>
            </div>

            <div class="message-area">
                <div class="wishes-text breathing" id="display-text">CHẠM ĐỂ TÌM TẦN SỐ CỦA BẠN</div>
                <div class="meta-text" id="meta-text">2026 COLLECTION</div>
            </div>
        </div>

        <div class="player-wrapper">
            <div class="player-controls">
                <div class="progress-bar-bg"><div class="progress-bar-fill" id="progressFill"></div></div>
                <div class="time-display">
                    <span id="currentTime">0:00</span>
                    <span id="totalTime">--:--</span>
                </div>
            </div>
        </div>

        <div class="scroll-hint" onclick="scrollToLetter()">
            ↓ SCROLL TO READ
        </div>
    </div>

    <div class="screen-letter" id="letterSection">
        <div class="letter-container">
            <div class="letter-header">A LETTER FROM PHOTONOIR</div>
            <div class="letter-body">
                <p>Năm vừa qua là một thước phim dài với đầy đủ những gam màu sáng tối. Cảm ơn bạn đã ghé thăm trạm dừng chân nhỏ bé này, đã để âm nhạc và hình ảnh của PhotoNoir len lỏi vào một góc cảm xúc.</p>
                <p>Chúng tôi tin rằng, mỗi khoảnh khắc bạn dừng lại nơi đây, dù chỉ là vài giây hay trọn vẹn một bản nhạc, đều là một sự kết nối vô hình nhưng đầy trân quý.</p>
                <p>Hành trình 2026 đang mở ra. Chúc bạn luôn giữ được "tần số" rực rỡ nhất của riêng mình. Hãy sống như một thước phim điện ảnh — đậm chất, tự do và đầy kiêu hãnh.</p>
            </div>
            <div class="letter-sign">The PhotoNoir Team.</div>
        </div>
    </div>

    <audio id="bgMusic"></audio>

    <script>
        // Loading Logic
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loader').style.opacity = '0';
                setTimeout(() => { document.getElementById('loader').style.display = 'none'; }, 800);
            }, 1000);
        });

        const audio = document.getElementById('bgMusic');
        const record = document.getElementById('record');
        const label = document.getElementById('label');
        const displayText = document.getElementById('display-text');
        const metaText = document.getElementById('meta-text');
        const progressFill = document.getElementById('progressFill');
        const currentTimeEl = document.getElementById('currentTime');
        const totalTimeEl = document.getElementById('totalTime');
        const letterSection = document.getElementById('letterSection');

        const tracks = [
            { id: 1, wish: "TRACK 01: KHỞI ĐẦU RỰC RỠ & ĐẦY KIÊU HÃNH.", song: "Sunroof - Nicky Youre", file: "track1.mp3" },
            { id: 2, wish: "TRACK 02: SỐNG TRỌN TỪNG KHOẢNH KHẮC ĐIỆN ẢNH.", song: "Golden Hour - JVKE", file: "track2.mp3" },
            { id: 3, wish: "TRACK 03: OUT NÉT NỖI BUỒN, LẤY NÉT NIỀM VUI.", song: "Shake It Off - Taylor Swift", file: "track3.mp3" },
            { id: 4, wish: "TRACK 04: DÁM LÀM NHỮNG ĐIỀU CHƯA TỪNG DÁM.", song: "The Nights - Avicii", file: "track4.mp3" },
            { id: 5, wish: "TRACK 05: TỎA SÁNG THEO CÁCH RIÊNG CỦA BẠN.", song: "Diamonds - Rihanna", file: "track5.mp3" },
            { id: 6, wish: "TRACK 06: TÌM THẤY KẾT NỐI CHÂN THẬT NHẤT.", song: "Until I Found You", file: "track6.mp3" },
            { id: 7, wish: "BONUS TRACK: VOUCHER 20% (CHỤP MÀN HÌNH NGAY!)", song: "Money - Lisa", file: "track7.mp3" },
            { id: 8, wish: "TRACK 08: BẢN NHẠC HAY NHẤT ĐỜI BẠN.", song: "Best Day Of My Life", file: "track8.mp3" },
            { id: 9, wish: "TRACK 09: YÊU BẢN THÂN NHIỀU HƠN MỘT CHÚT.", song: "Flowers - Miley Cyrus", file: "track9.mp3" }
        ];

        const STORAGE_KEY = 'photonoir_tracklist_v15';
        let isPlaying = false;
        let userTrack = null;

        // Auto Load Previous Track
        window.onload = function() {
            const savedIndex = localStorage.getItem(STORAGE_KEY);
            if (savedIndex !== null) {
                userTrack = tracks[parseInt(savedIndex)];
                setTrackInfo(userTrack);
                displayText.classList.remove('breathing');
                displayText.classList.add('glitch');
                document.querySelector('.player-controls').parentElement.classList.add('has-played');
            }
        };

        function handleInteraction() {
            if (isPlaying) {
                pauseMusic();
            } else {
                playMusic();
            }
        }

        function playMusic() {
            record.classList.add('spinning-anim');
            label.classList.add('spinning-anim');
            isPlaying = true;
            if (userTrack) {
                audio.src = userTrack.file;
                audio.play();
                document.querySelector('.player-controls').style.opacity = '1';
            } else {
                startShuffle();
            }
        }

        function pauseMusic() {
            audio.pause();
            record.classList.remove('spinning-anim');
            label.classList.remove('spinning-anim');
            isPlaying = false;
        }

        function startShuffle() {
            displayText.classList.remove('breathing');
            metaText.innerText = "SCANNING FREQUENCY...";
            let count = 0; let speed = 50; let maxCount = 40;
            function step() {
                const randomItem = tracks[Math.floor(Math.random() * tracks.length)];
                displayText.innerText = randomItem.wish;
                displayText.style.opacity = 0.6;
                count++;
                if (count < maxCount) {
                    speed += (count > 30) ? 15 : 2;
                    setTimeout(step, speed);
                } else {
                    finalizeResult();
                }
            }
            step();
        }

        function finalizeResult() {
            const randomIndex = Math.floor(Math.random() * tracks.length);
            userTrack = tracks[randomIndex];
            localStorage.setItem(STORAGE_KEY, randomIndex);
            setTrackInfo(userTrack);
            displayText.style.opacity = 1;
            displayText.classList.add('glitch');
            document.querySelector('.player-controls').style.opacity = '1';
            audio.src = userTrack.file;
            audio.play().catch(e => console.log("Interaction needed"));
            if (navigator.vibrate) navigator.vibrate([50, 30, 50]);
        }

        function setTrackInfo(track) {
            displayText.innerText = track.wish;
            metaText.innerText = "NOW PLAYING: " + track.song;
        }

        // Scroll to Letter
        function scrollToLetter() {
            letterSection.scrollIntoView({ behavior: 'smooth' });
        }

        // --- AUDIO FADING EFFECT ---
        // Khi kéo xuống đọc thư, nhạc sẽ nhỏ dần để không làm phiền
        window.addEventListener('scroll', () => {
            if (!isPlaying) return;
            
            const letterTop = letterSection.getBoundingClientRect().top;
            const windowHeight = window.innerHeight;
            
            // Tính toán khoảng cách: Khi thư trồi lên 50% màn hình thì âm lượng giảm
            if (letterTop < windowHeight * 0.8) {
                // Đang đọc thư -> Giảm âm lượng
                if (audio.volume > 0.2) audio.volume -= 0.05;
            } else {
                // Quay lại player -> Tăng âm lượng
                if (audio.volume < 1.0) audio.volume += 0.05;
            }
        });

        audio.ontimeupdate = function() {
            if (audio.duration) {
                const percent = (audio.currentTime / audio.duration) * 100;
                progressFill.style.width = percent + '%';
                currentTimeEl.innerText = formatTime(audio.currentTime);
                totalTimeEl.innerText = formatTime(audio.duration);
            }
        };

        audio.onended = function() {
            record.classList.remove('spinning-anim');
            label.classList.remove('spinning-anim');
            isPlaying = false;
            progressFill.style.width = '0%';
        };

        function formatTime(s) {
            if(isNaN(s)) return "0:00";
            const min = Math.floor(s / 60);
            const sec = Math.floor(s % 60);
            return `${min}:${sec<10?'0'+sec:sec}`;
        }
    </script>
</body>
</html>
